(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{66:function(e,t,n){e.exports=n(95)},71:function(e,t,n){},72:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),s=n.n(c),o=(n(71),n(72),n(26)),i=n(23),l=n(2),u=n(30),m=n.n(u),d="https://postbox-mernstack.herokuapp.com/",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d+"";return{fetchAll:function(){return m.a.get(e)},fetchById:function(t){return m.a.get(e+t)},create:function(t){return m.a.post(e,t)},update:function(t,n){return m.a.put(e+t,n)},delete:function(t){return m.a.delete(e+t)}}},p="CREATE",g="UPDATE",E="DELETE",h="FETCH_ALL",b=n(127),v=n(96),O=n(124),j=n(128),y=n(129),C=n(36),M=n(125),P=n(130),w=n(4),x=n(16),I=n(133),T=n(10),k=function(e,t){var n=Object(a.useState)(e),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)({}),l=Object(i.a)(o,2),u=l[0],m=l[1];return{values:c,setValues:s,errors:u,setErrors:m,handleInputChange:function(e){var t=e.target,n=t.name,a=t.value;s(Object(x.a)({},c,Object(T.a)({},n,a)))},resetForm:function(){s(e),m({}),t(0)}}},_=n(14),S=n.n(_),A=n(120),L={title:"",message:""},B={createPostMessage:function(e,t){return function(n){f().create(e).then((function(e){n({type:p,payload:e.data}),t()})).catch((function(e){return console.log(e)}))}},updatePostMessage:function(e,t,n){return function(a){f().update(e,t).then((function(e){a({type:g,payload:e.data}),n()})).catch((function(e){return console.log(e)}))}}},D=Object(o.b)((function(e){return{postMessageList:e.postMessage.list}}),B)(Object(w.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},postBtn:{width:"50%"}}}))((function(e){var t=e.classes,n=Object(l.a)(e,["classes"]);Object(a.useEffect)((function(){0!=n.currentId&&(o(Object(x.a)({},n.postMessageList.find((function(e){return e._id==n.currentId})))),u({}))}),[n.currentId]);var c=k(L,n.setCurrentId),s=c.values,o=c.setValues,i=c.errors,u=c.setErrors,m=c.handleInputChange,d=c.resetForm;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(t.root," ").concat(t.form),onSubmit:function(e){e.preventDefault();var t=function(){S.a.raise({content:r.a.createElement(_.Cinnamon.Crisp,{title:"Post Box",content:"Submitted successfully",scheme:_.Cinnamon.Crisp.SCHEME_PURPLE,icon:r.a.createElement(A.a,null)})}),d()};(function(){var e=Object(x.a)({},i);return e.title=s.title?"":"This field is required.",e.message=s.message?"":"This field is required.",u(Object(x.a)({},e)),Object.values(e).every((function(e){return""==e}))})()&&(0==n.currentId?n.createPostMessage(s,t):n.updatePostMessage(n.currentId,s,t))}},r.a.createElement(I.a,Object.assign({name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:s.title,onChange:m},i.title&&{error:!0,helperText:i.title})),r.a.createElement(I.a,Object.assign({name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,rows:4,value:s.message,onChange:m},i.message&&{error:!0,helperText:i.message})),r.a.createElement(M.a,{variant:"contained",color:"primary",size:"large",type:"submit",className:t.postBtn},"Submit"))}))),N=n(126),W={fetchAllPostMessages:function(){return function(e){f().fetchAll().then((function(t){e({type:h,payload:t.data})})).catch((function(e){return console.log(e)}))}},deletePostMessage:function(e,t){return function(n){f().delete(e).then((function(a){n({type:E,payload:e}),t()})).catch((function(e){return console.log(e)}))}}},F=Object(o.b)((function(e){return{postMessageList:e.postMessage.list}}),W)(Object(w.a)((function(e){return{paper:{margin:e.spacing(3),padding:e.spacing(2)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))((function(e){var t=e.classes,n=Object(l.a)(e,["classes"]),c=Object(a.useState)(0),s=Object(i.a)(c,2),o=s[0],u=s[1];Object(a.useEffect)((function(){n.fetchAllPostMessages()}),[]);return r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:5},r.a.createElement(v.a,{className:t.paper},r.a.createElement(D,{currentId:o,setCurrentId:u}))),r.a.createElement(b.a,{item:!0,xs:7},r.a.createElement(v.a,{className:t.paper},r.a.createElement(O.a,null,n.postMessageList.map((function(e,c){return r.a.createElement(a.Fragment,{key:c},r.a.createElement(j.a,null,r.a.createElement(y.a,null,r.a.createElement(C.a,{variant:"h5"},e.title),r.a.createElement("div",null,e.message),r.a.createElement("div",{className:t.actionDiv},r.a.createElement(M.a,{variant:"contained",color:"primary",size:"small",className:t.smMargin,onClick:function(){return u(e._id)}},"Edit"),r.a.createElement(M.a,{variant:"contained",color:"secondary",size:"small",className:t.smMargin,onClick:function(){return t=e._id,void(window.confirm("Are you sure to delete this record?")&&n.deletePostMessage(t,(function(){S.a.raise({content:r.a.createElement(_.Cinnamon.Crisp,{title:"Post Box",content:"Deleted successfully",scheme:_.Cinnamon.Crisp.SCHEME_PURPLE,icon:r.a.createElement(N.a,null)})})})));var t}},"Delete")))),r.a.createElement(P.a,{component:"li"}))}))))))}))),z=n(19),H=n(55),R=n(15),U={list:[]},V=Object(z.c)({postMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(x.a)({},e,{list:Object(R.a)(t.payload)});case p:return Object(x.a)({},e,{list:[].concat(Object(R.a)(e.list),[t.payload])});case g:return Object(x.a)({},e,{list:e.list.map((function(e){return e._id==t.payload._id?t.payload:e}))});case E:return Object(x.a)({},e,{list:e.list.filter((function(e){return e._id!=t.payload}))});default:return e}}}),q=Object(z.e)(V,Object(z.d)(Object(z.a)(H.a))),J=n(131),G=n(132);var $=function(){return r.a.createElement(o.a,{store:q},r.a.createElement(J.a,{maxWidth:"lg"},r.a.createElement(G.a,{position:"static",color:"inherit"},r.a.createElement(C.a,{variant:"h2",align:"center"},"Post Box")),r.a.createElement(F,null),r.a.createElement(S.a,{position:{vertical:_.POS_TOP,horizontal:_.POS_RIGHT}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.602828ab.chunk.js.map